/*! jquery wizard - v0.1.0 - 2015-05-02
* https://github.com/amazingSurge/jquery-wizard
* Copyright (c) 2015 amazingSurge; Licensed GPL */
!function(a,b,c,d){"use strict";function e(a,b){var c=!1;a.one(h.transition.end,function(){c=!0});var d=function(){c||a.trigger(h.transition.end)};return setTimeout(d,b),this}function f(a){return a.charAt(0).toUpperCase()+a.slice(1)}function g(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}var h=function(){function b(b,c){var g=!1,h=b.charAt(0).toUpperCase()+b.slice(1);return e[b]!==d&&(g=b),g||a.each(f,function(a,b){return e[b+h]!==d?(g="-"+b.toLowerCase()+"-"+h,!1):void 0}),c?g:g?!0:!1}function c(a){return b(a,!0)}var e=a("<support>").get(0).style,f=["webkit","Moz","O","ms"],g={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}}},h={csstransitions:function(){return!!b("transition")}},i={};return h.csstransitions()&&(i.transition=new String(c("transition")),i.transition.end=g.transition.end[i.transition]),i}(),i=function(b,c){this.$element=a(b),this.options=a.extend(!0,{},i.defaults,c),this.$steps=this.$element.find(this.options.step),this.initialize()};i.defaults={step:".steps > li",classes:{step:{done:"done",error:"error",active:"active",disabled:"disabled",activing:"activing"},panel:{active:"active",activing:"activing"}},onStateChange:null,autoFocus:!0,keyboard:!0,contentCache:!0,validator:function(a){return!0},onReset:null,onNext:null,onprev:null,onFirst:null,onLast:null,onShow:null,onHide:null,onLoad:null,onLoaded:null,onInit:null,onDestroy:null,onChanging:null,onChanged:null,onFinishing:null,onFinished:null,onContentLoaded:null},a.extend(g.prototype,{TRANSITION_DURATION:200,initialize:function(b,c,d){this.$element=a(b),this.wizard=c,this.events={},this.states={done:!1,error:!1,active:!1,disabled:!1,activing:!1},this.index=d,this.$element.data("wizard-index",d);var e=this.$element.data("target");e||(e=this.$element.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,"")),this.$panel=a(e)},setup:function(){this.index===this.wizard.currentIndex()&&this.enter("active"),this.$element.attr("aria-expanded",this.is("active")),this.$panel.attr("aria-expanded",this.is("active"));var a=this.wizard.options.classes;this.is("active")?this.$panel.addClass(a.step.active):this.$panel.removeClass(a.step.active)},show:function(b){if(!this.is("activing")&&!this.is("active")){this.enter("activing");var c=this.wizard.options.classes;this.$element.attr("aria-expanded",!0),this.$panel.addClass(c.panel.activing).addClass(c.panel.active).attr("aria-expanded",!0);var d=function(){this.$panel.removeClass(c.panel.activing),this.leave("activing"),this.enter("active"),a.isFunction(b)&&b.call(this)};if(!h.transition)return d.call(this);this.$panel.one(h.transition.end,a.proxy(d,this)),e(this.$panel,this.TRANSITION_DURATION)}},hide:function(){if(!this.is("activing")&&this.is("active")){this.enter("activing");var b=this.wizard.options.classes;this.$element.attr("aria-expanded",!1),this.$panel.addClass(b.panel.activing).removeClass(b.panel.active).attr("aria-expanded",!1);var c=function(c){this.$panel.removeClass(b.panel.activing),this.leave("activing"),this.leave("active"),a.isFunction(c)&&c.call(this)};if(!h.transition)return c.call(this);this.$panel.one(h.transition.end,a.proxy(c,this)),e(this.$panel,this.TRANSITION_DURATION)}},empty:function(){this.$panel.empty()},showLoading:function(){},hideLoading:function(){},load:function(b){function c(a){d.$panel.html(a),d.hideLoading(),d.trigger(d,"afterLoad",b)}var d=(b.options,this);b.content?c(b.content):b.url?(this.showLoading(),a.ajax(b.url,b.settings||{}).done(function(a){c(a)}).fail(function(){})):c("")},on:function(b,c){a.isFunction(c)&&(this.events[b]=c)},trigger:function(b){var c=Array.prototype.slice.call(arguments,1);a.isFunction(this.events[b])&&this.events[b].apply(this,c),this.wizard.trigger(b,this.index,c)},is:function(a){return this.states[a]&&this.states[a]===!0},enter:function(a){this.states[a]=!0;var b=this.wizard.options.classes;this.$element.addClass(b.step[a]),this.trigger("enter"+f(a))},leave:function(a){this.states[a]=!1;var b=this.wizard.options.classes;this.$element.removeClass(b.step[a]),this.trigger("leave"+f(a))},validate:function(){},getPanel:function(){return this.$panel}}),a.extend(i.prototype,{Constructor:i,initialize:function(){this.steps=[];var c=this;this.$steps.each(function(a){c.steps.push(new g(this,c,a))}),this._current=0,this.transitioning=null,a.each(this.steps,function(a,b){b.setup()}),this.$element.on("click",this.options.step,function(b){var d=a(this).data("wizard-index");c.goTo(d)}),this.options.keyboard&&a(b).on("keyup",a.proxy(this._keydown,this))},_keydown:function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},get:function(a){return a<this.length()&&this.steps[a]?this.steps[a]:null},goTo:function(a){if(a!==this._current&&this.transitioning!==!0){this.transitioning=!0;var b=this;this.current().hide(),this.get(a).show(function(){if(b._current=a,b.transitioning=!1,b.options.autoFocus){var c=this.$panel.find(":input");c.length>0?c.eq(0).focus():this.$panel.focus()}})}},trigger:function(){},length:function(){return this.steps.length},current:function(){return this.get(this._current)},currentIndex:function(){return this._current},next:function(){return this._current<this.length()-1&&this.goTo(this._current+1),!1},prev:function(){this._current>0&&this.goTo(this._current-1)},first:function(){return this.goTo(0)},finish:function(){return this.goTo(this.length()-1)},reset:function(){},destroy:function(){}}),a.fn.wizard=function(b){if("string"!=typeof b)return this.each(function(){a.data(this,"wizard")||a.data(this,"wizard",new i(this,b))});var c=b,d=Array.prototype.slice.call(arguments,1);if(/^\_/.test(c))return!1;if(!/^(get)$/.test(c))return this.each(function(){var b=a.data(this,"wizard");b&&"function"==typeof b[c]&&b[c].apply(b,d)});var e=this.first().data("wizard");return e&&"function"==typeof e[c]?e[c].apply(e,d):void 0}}(jQuery,document,window);