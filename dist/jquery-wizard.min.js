/*! jquery wizard - v0.1.0 - 2015-05-04
* https://github.com/amazingSurge/jquery-wizard
* Copyright (c) 2015 amazingSurge; Licensed GPL */
!function(a,b,c,d){"use strict";function e(a,b){var c=!1;a.one(h.transition.end,function(){c=!0});var d=function(){c||a.trigger(h.transition.end)};return setTimeout(d,b),this}function f(a){return a.charAt(0).toUpperCase()+a.slice(1)}function g(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}var h=function(){function b(b,c){var g=!1,h=b.charAt(0).toUpperCase()+b.slice(1);return e[b]!==d&&(g=b),g||a.each(f,function(a,b){return e[b+h]!==d?(g="-"+b.toLowerCase()+"-"+h,!1):void 0}),c?g:g?!0:!1}function c(a){return b(a,!0)}var e=a("<support>").get(0).style,f=["webkit","Moz","O","ms"],g={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}}},h={csstransitions:function(){return!!b("transition")}},i={};return h.csstransitions()&&(i.transition=new String(c("transition")),i.transition.end=g.transition.end[i.transition]),i}(),i=0,j=function(b,c){this.$element=a(b),this.options=a.extend(!0,{},j.defaults,c),this.$steps=this.$element.find(this.options.step),this.id=this.$element.attr("id"),this.id||(this.id="wizard-"+ ++i,this.$element.attr("id",this.id)),this.initialize()};j.defaults={step:".wizard-steps > li",getPane:function(b,c){var d=a(c),e=d.data("target");return e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,"")),a(e)},buttonsAppendTo:"this",templates:{buttons:function(){var a=this.options;return'<div class="wizard-buttons"><a class="'+a.classes.button.back+'" href="#'+this.id+'" data-wizard="back" role="button">'+a.buttonLabels.back+'</a><a class="'+a.classes.button.next+'" href="#'+this.id+'" data-wizard="next" role="button">'+a.buttonLabels.next+'</a><a class="'+a.classes.button.finish+'" href="#'+this.id+'" data-wizard="finish" role="button">'+a.buttonLabels.finish+"</a></div>"}},classes:{step:{done:"done",error:"error",active:"active",disabled:"disabled",activing:"activing",loading:"loading"},panel:{active:"active",activing:"activing"},button:{hide:"hide",disabled:"disabled",next:"",back:"",finish:""}},autoFocus:!0,keyboard:!0,buttonLabels:{next:"Next",back:"Back",finish:"Finish"},loading:{show:function(a){},hide:function(a){},fail:function(a){}},onReset:null,onNext:null,onBack:null,onFirst:null,onLast:null,onShow:null,onHide:null,onLoad:null,onLoaded:null,onInit:null,onDestroy:null,onChanging:null,onChanged:null,onFinishing:null,onFinished:null,onContentLoaded:null},a.extend(g.prototype,{TRANSITION_DURATION:200,initialize:function(b,c,d){this.$element=a(b),this.wizard=c,this.events={},this.validator=function(){return!0},this.states={done:!1,error:!1,active:!1,disabled:!1,activing:!1},this.index=d,this.$element.data("wizard-index",d),this.$pane=this.wizard.options.getPane.call(this.wizard,d,b)},setup:function(){this.index===this.wizard.currentIndex()&&this.enter("active"),this.$element.attr("aria-expanded",this.is("active")),this.$pane.attr("aria-expanded",this.is("active"));var a=this.wizard.options.classes;this.is("active")?this.$pane.addClass(a.step.active):this.$pane.removeClass(a.step.active)},show:function(b){if(!this.is("activing")&&!this.is("active")){this.enter("activing");var c=this.wizard.options.classes;this.$element.attr("aria-expanded",!0),this.$pane.addClass(c.panel.activing).addClass(c.panel.active).attr("aria-expanded",!0);var d=function(){this.$pane.removeClass(c.panel.activing),this.leave("activing"),this.enter("active"),a.isFunction(b)&&b.call(this)};if(!h.transition)return d.call(this);this.$pane.one(h.transition.end,a.proxy(d,this)),e(this.$pane,this.TRANSITION_DURATION)}},hide:function(b){if(!this.is("activing")&&this.is("active")){this.enter("activing");var c=this.wizard.options.classes;this.$element.attr("aria-expanded",!1),this.$pane.addClass(c.panel.activing).removeClass(c.panel.active).attr("aria-expanded",!1);var d=function(){this.$pane.removeClass(c.panel.activing),this.leave("activing"),this.leave("active"),a.isFunction(b)&&b.call(this)};if(!h.transition)return d.call(this);this.$pane.one(h.transition.end,a.proxy(d,this)),e(this.$pane,this.TRANSITION_DURATION)}},empty:function(){this.$pane.empty()},load:function(b){function c(a){d.$pane.html(a),d.wizard.options.loading.hide.call(d.wizard,d),d.leave("loading")}var d=(b.options,this);this.enter("loading"),b.content?c(b.content):b.url?(d.wizard.options.loading.show.call(d.wizard,d),a.ajax(b.url,b.settings||{}).done(function(a){c(a)}).fail(function(){d.wizard.options.loading.fail.call(d.wizard,d)})):c("")},on:function(b,c){return a.isFunction(c)&&(a.isArray(this.events[b])?this.events[b].push(c):this.events[b]=[c]),this},off:function(b,c){return a.isFunction(c)&&a.isArray(this.events[b])&&a.each(this.events[b],function(a,d){return d===c?(delete this.events[b][a],!1):void 0}),this},trigger:function(b){var c=Array.prototype.slice.call(arguments,1);if(a.isArray(this.events[b]))for(var d in this.events[b])this.events[b][d].apply(this,c);this.wizard.trigger(b,this.index,c)},is:function(a){return this.states[a]&&this.states[a]===!0},enter:function(a){this.states[a]=!0;var b=this.wizard.options.classes;this.$element.addClass(b.step[a]),this.trigger("enter"+f(a))},leave:function(a){if(this.states[a]){this.states[a]=!1;var b=this.wizard.options.classes;this.$element.removeClass(b.step[a]),this.trigger("leave"+f(a))}},reset:function(){for(var a in this.states)this.leave(a);return this.setup(),this},setValidator:function(b){return a.isFunction(b)&&(this.validator=b),this},validate:function(){return this.validator.call(this.$pane.get(0),this)},getPane:function(){return this.$pane}}),a.extend(j.prototype,{Constructor:j,initialize:function(){this.steps=[];var c=this;this.$steps.each(function(a){c.steps.push(new g(this,c,a))}),this._current=0,this.transitioning=null,a.each(this.steps,function(a,b){b.setup()}),this.setup(),this.$element.on("click",this.options.step,function(b){var d=a(this).data("wizard-index");c.goTo(d)}),this.options.keyboard&&a(b).on("keyup",a.proxy(this.keydown,this))},setup:function(){this.$buttons=a(this.options.templates.buttons.call(this)),this.updateButton(),this.$buttons.appendTo("this"===this.options.buttonsAppendTo?this.$element:this.options.buttonsAppendTo)},updateButton:function(){var a=this.options.classes.button,b=this.$buttons.find('[data-wizard="back"]'),c=this.$buttons.find('[data-wizard="next"]'),d=this.$buttons.find('[data-wizard="finish"]');0===this._current?b.addClass(a.disabled):b.removeClass(a.disabled),this._current===this.length()-1?(c.addClass(a.hide),d.removeClass(a.hide)):(c.removeClass(a.hide),d.addClass(a.hide))},keydown:function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.back();break;case 39:this.next();break;default:return}a.preventDefault()}},get:function(a){return a<this.length()&&this.steps[a]?this.steps[a]:null},goTo:function(a){if(a!==this._current&&this.transitioning!==!0){var b=this.current();if(!b.validate())return b.leave("done"),b.enter("error"),!1;b.leave("error"),a>this._current&&b.enter("done"),this.transitioning=!0;var c=this;b.hide(),this.get(a).show(function(){if(c._current=a,c.transitioning=!1,c.updateButton(),c.options.autoFocus){var b=this.$pane.find(":input");b.length>0?b.eq(0).focus():this.$pane.focus()}})}},trigger:function(a,b){Array.prototype.slice.call(arguments,1);this.$element.trigger(a)},length:function(){return this.steps.length},current:function(){return this.get(this._current)},currentIndex:function(){return this._current},next:function(){return this._current<this.length()-1&&this.goTo(this._current+1),!1},back:function(){this._current>0&&this.goTo(this._current-1)},first:function(){return this.goTo(0)},finish:function(){return this.goTo(this.length()-1)},reset:function(){this._current=0,a.each(this.steps,function(a,b){b.reset()})}}),a(b).on("click","[data-wizard]",function(b){var c,d=a(this),e=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("wizard");if(f){var g=d.data("wizard");/^(back|next|first|finish|reset)$/.test(g)&&f[g](),b.preventDefault()}}),a.fn.wizard=function(b){if("string"!=typeof b)return this.each(function(){a.data(this,"wizard")||a.data(this,"wizard",new j(this,b))});var c=b,d=Array.prototype.slice.call(arguments,1);if(/^\_/.test(c))return!1;if(!/^(get)$/.test(c))return this.each(function(){var b=a.data(this,"wizard");b&&"function"==typeof b[c]&&b[c].apply(b,d)});var e=this.first().data("wizard");return e&&"function"==typeof e[c]?e[c].apply(e,d):void 0}}(jQuery,document,window);